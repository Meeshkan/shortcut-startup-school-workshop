<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Setting up CI/CD and integration testing</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/matrix.css" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css" />

    <!-- Printing and PDF exports -->
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section id="welcome" data-markdown>
          <textarea data-template>
			### CI/CD and integration testing

			[github.com/unmock/shortcut-startup-school-workshop](https://github.com/unmock/shortcut-startup-school-workshop)

			[https://bit.ly/2nYyRnn](https://bit.ly/2nYyRnn)
			
			</textarea
          >
        </section>

        <section id="agenda" data-markdown>
          <textarea data-template>
### Agenda

1. Tour of the application
1. CI/CD
1. Testing

			</textarea
          >
        </section>

        <section id="prerequisites" data-markdown>
          <textarea data-template>
### What you'll need

1. (Recent) Node.js
1. GitHub account
1. Editor

			</textarea
          >
        </section>

        <section id="app" data-markdown>
          <textarea data-template>
### Example application

1. (Web) application showing your GitHub repositories
1. Express server with server-side rendering (React)
1. Uses GitHub REST API for fetching repos

			</textarea
          >
        </section>
        <section id="ssr" data-markdown>
          <textarea data-template>
### Server-side rendering

1. Render HTML in the server
  - Less JS in the client
1. Good:
  - SEO
  - Simpler architecture (no separate backend)
1. Bad:
  - First loading time can be long
  - Added complexity in routing and data fetching (see [Next.js](https://nextjs.org/))

			</textarea
          >
        </section>
        <section id="app-tour" data-markdown>
          <textarea data-template>
### Tour of the app
			</textarea
          >
        </section>

        <section id="cicd" data-markdown>
          <textarea data-template>
### What is CI/CD

- Continuous integration and deployment/delivery
			</textarea
          >
        </section>
        <section id="ci" data-markdown>
          <textarea data-template>
### Continuous integration

- Merge changes to master branch as often as possible
- Validate all changes by creating a build and running automated tests
- Big emphasis on **testing automation**

			</textarea
          >
        </section>
        <section id="cd" data-markdown>
          <textarea data-template>
### Continuous deployment

- Deploy new version for every change in the master branch
- Could consist of many steps:
  1. Deploy first to a **test environment**
  1. Deploy to (pre-)production manually or once integration tests pass

			</textarea
          >
        </section>
        <section id="why-ci" data-markdown>
          <textarea data-template>
#### CI encourages frequent testing

- Less bugs
- Faster release cycle
- More developer confidence

			</textarea
          >
        </section>
        <section id="solutions-ci" data-markdown>
          <textarea data-template>

### Solutions

- [CircleCI](https://circleci.com)
- [Travis CI](https://travis-ci.org/)
- [GitHub actions](https://github.com/features/actions)
- [Jenkins](https://jenkins.io/)
- [Azure Pipelines](https://azure.microsoft.com/en-us/services/devops/pipelines/)

			</textarea
          >
        </section>

        <section id="testing" data-markdown>
          <textarea data-template>
### Introduction to testing
			</textarea
          >
        </section>

        <section id="types-of-tests" data-markdown>
          <textarea data-template>
### Testing
Eric Elliott [says](https://www.sitepoint.com/javascript-testing-unit-functional-integration/):
- **Unit tests** ensure that individual components of the app work as expected.
- **Integration tests** ensure that component collaborations work as expected.
- **Functional tests** ensure that the app works as expected from the userâ€™s perspective.
					 </textarea
          >
        </section>
        <section id="testing-apis" data-markdown>
          <textarea data-template>
### Integration testing
Using production APIs in tests is not a good idea:
- Production data should be decoupled from tests
- Costs and rate-limits
- Bugs in code could have [drastic side-effects](https://dev.to/adamwknox/i-made-a-mistake-implementing-a-react-hook-and-got-a-denial-of-service-from-my-backend-5cji)
			</textarea
          >
        </section>
        <section id="unmock-101" data-markdown>
          <textarea data-template>
### Unmock
- Open source library for mocking HTTP traffic
- Get started:
<pre>
  <code class="language-bash">$ yarn add unmock -D
$ yarn add @unmock/githubv3 -D # Add GitHub v3 service for mocking
  </code>
</pre>
- Read the docs: [unmock.io/docs](https://www.unmock.io/docs/introduction)
			</textarea
          >
        </section>
        <section id="unmock-jest" data-markdown>
          <textarea data-template>
### Unmock test reporter
- Create a HTML report of tests and their HTTP calls
<pre><code class="language-bash">$ yarn add unmock-jest -D</code></pre>
- Add as reporter:
<pre>
  <code class="language-json">// jest.config.js
{ reporters: ["default", "unmock-jest/reporter"] }
  </code>
</pre>
- Read [more](https://www.unmock.io/docs/jest-reporter)
			</textarea
          >
        </section>
        <!--
        <section id="experiment">
          <section class="my-class">
            <h3 class="my-class__title">Title</h3>
            <div class="my-class__texts my-class__item">
              Something here!
            </div>
          </section>
        </section>
        -->
      </div>
    </div>

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        hash: true,
        transition: "none",
        dependencies: [
          { src: "plugin/markdown/marked.js" },
          { src: "plugin/markdown/markdown.js" },
          { src: "plugin/notes/notes.js", async: true },
          { src: "plugin/highlight/highlight.js", async: true },

          // Zoom in and out with Alt+click
          { src: "plugin/zoom-js/zoom.js", async: true },
        ],
      });
    </script>
  </body>
</html>
